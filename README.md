# üßæ Orders Center ‚Äî Transactional Outbox

**Orders Center** ‚Äî –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞–∫–∞–∑–∞–º–∏.  
–≠—Ç–æ _–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã_ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ.  
–û–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å 1–° —á–µ—Ä–µ–∑ REST –≤ —Ä–∞–º–∫–∞—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç –º–æ–Ω–æ–ª–∏—Ç–∞ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (—á–µ—Ä–µ–∑ Docker Compose)

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```bash
docker-compose up --build
```

–≠—Ç–æ –ø–æ–¥–Ω–∏–º–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:

- `orders-center` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –∑–∞–∫–∞–∑–æ–≤
- `mock-1C` ‚Äî –º–æ–∫ 1–° (REST API)
- `order_eno_1c` ‚Äî —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å 1–°
- `cronSvc` ‚Äî —Å–µ—Ä–≤–∏—Å —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á (worker pool)

---

## üß© –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

| –ú–æ–¥–µ–ª—å         | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|----------------|---------------------------------------------|
| `Order`        | –ó–∞–∫–∞–∑                                        |
| `OrderItem`    | –¢–æ–≤–∞—Ä –≤ —Å–æ—Å—Ç–∞–≤–µ –∑–∞–∫–∞–∑–∞                       |
| `OrderPayment` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–ø–ª–∞—Ç–µ –∑–∞–∫–∞–∑–∞                 |
| `History`      | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ –∑–∞–∫–∞–∑—É                 |
| `OrderFull`    | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –∑–∞–∫–∞–∑—É |

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
+----------------+           +---------------------+
|  orders-center | <-------> |      mock-1C        |
|   (–æ—Å–Ω–æ–≤–Ω–æ–π)   |   REST    |  (—ç–º—É–ª—è—Ü–∏—è 1–° API)  |
+-------+--------+           +----------+----------+
        |                              
        |           –∑–∞–¥–∞—á–∏               
        v                              
+-----------------+          +------------------+
|   order_eno_1c  |  ---->   |     cronSvc      |
|  —Å–æ–∑–¥–∞—ë—Ç —Ç–∞—Å–∫–∏  |          |  –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–∞—Å–∫–∏ |
|  –∏ —à–ª—ë—Ç –≤ 1–°    |          | —á–µ—Ä–µ–∑ worker pool|
+-----------------+          +------------------+

   * cronSvc –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ order_eno_1c.
     –û–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏, –Ω–µ –∑–Ω–∞—è –∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
```

### –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤:

- **`orders-center`** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –æ—Ç–¥–∞–µ—Ç –∑–∞–∫–∞–∑—ã.
- **`mock-1C`** ‚Äî –∏–º–∏—Ç–∞—Ü–∏—è 1–°, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã.
- **`order_eno_1c`** ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é.
- **`cronSvc`** ‚Äî –≤–æ—Ä–∫–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –∑–∞–¥–∞—á–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (concurrent workers).

---

## üîß –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:
```http
POST /orders
Content-Type: application/json

{
  "order": {...},
  "items": [...],
  "payment": [...],
  "history": [...]
}
```

